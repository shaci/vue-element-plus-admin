var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,r=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&s(e,a,t[a]);if(o)for(var a of o(t))l.call(t,a)&&s(e,a,t[a]);return e};import{H as i,bO as u,V as p,m as d,aI as c,E as f,az as v,F as m,N as y,al as b,d as x,an as g,b1 as h,U as w,aK as S,R as $,aY as k,bf as z,bP as C,bQ as I,aU as P,q as j,M as E,aC as O,C as F,b6 as V,J as A,aF as M,aX as N,o as _,c as B,Y as R,$ as H,n as K,a as T,z as W,e as q,v as L,w as U,Z as X,P as D,X as Y,g as Z,ay as J,ar as Q,t as G,a0 as ee,_ as te,aj as ae,am as oe,a1 as ne}from"./index.a60e422a.js";import{m as le}from"./typescript2.7e235180.js";import{U as se}from"./event2.b9713b74.js";import{u as re,a as ie}from"./index2.6005bce8.js";import{i as ue}from"./el-popper.fec8696f.js";const pe=e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e),de=["class","style"],ce=/^on[A-Z]/,fe=(e={})=>{const{excludeListeners:t=!1,excludeKeys:a}=e,o=i((()=>((null==a?void 0:a.value)||[]).concat(de))),n=p();return i(n?()=>{var e;return u(Object.entries(null==(e=n.proxy)?void 0:e.$attrs).filter((([e])=>!(o.value.includes(e)||t&&ce.test(e)))))}:()=>({}))};let ve;const me=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function ye(e,t=1,a){var o;ve||(ve=document.createElement("textarea"),document.body.appendChild(ve));const{paddingSize:n,borderSize:l,boxSizing:s,contextStyle:r}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:me.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:a}}(e);ve.setAttribute("style",`${r};\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`),ve.value=e.value||e.placeholder||"";let i=ve.scrollHeight;const u={};"border-box"===s?i+=l:"content-box"===s&&(i-=n),ve.value="";const p=ve.scrollHeight-n;if(c(t)){let e=p*t;"border-box"===s&&(e=e+n+l),i=Math.max(e,i),u.minHeight=`${e}px`}if(c(a)){let e=p*a;"border-box"===s&&(e=e+n+l),i=Math.min(e,i)}return u.height=`${i}px`,null==(o=ve.parentNode)||o.removeChild(ve),ve=void 0,u}const be=f({id:{type:String,default:void 0},size:v,disabled:Boolean,modelValue:{type:m([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:m([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:y,default:""},prefixIcon:{type:y,default:""},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:m([Object,Array,String]),default:()=>le({})}}),xe={[se]:e=>b(e),input:e=>b(e),change:e=>b(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},ge=["role"],he=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],we=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"];var Se;const $e=ne(te(x((Se=r({},{name:"ElInput",inheritAttrs:!1}),t(Se,a({props:be,emits:xe,setup(e,{expose:t,emit:a}){const o=e,n={suffix:"append",prefix:"prepend"},l=p(),s=g(),u=h(),c=i((()=>{const e={};return"combobox"===o.containerRole&&(e["aria-haspopup"]=s["aria-haspopup"],e["aria-owns"]=s["aria-owns"],e["aria-expanded"]=s["aria-expanded"]),e})),f=fe({excludeKeys:i((()=>Object.keys(c.value)))}),{form:v,formItem:m}=re(),{inputId:y}=ie(o,{formItemContext:m}),b=w(),x=S(),te=$("input"),ne=$("textarea"),le=k(),de=k(),ce=d(!1),ve=d(!1),me=d(!1),be=d(!1),xe=d(),Se=k(o.inputStyle),$e=i((()=>le.value||de.value)),ke=i((()=>{var e;return null!=(e=null==v?void 0:v.statusIcon)&&e})),ze=i((()=>(null==m?void 0:m.validateState)||"")),Ce=i((()=>z[ze.value])),Ie=i((()=>be.value?C:I)),Pe=i((()=>[s.style,o.inputStyle])),je=i((()=>[o.inputStyle,Se.value,{resize:o.resize}])),Ee=i((()=>ue(o.modelValue)?"":String(o.modelValue))),Oe=i((()=>o.clearable&&!x.value&&!o.readonly&&!!Ee.value&&(ce.value||ve.value))),Fe=i((()=>o.showPassword&&!x.value&&!o.readonly&&!!Ee.value&&(!!Ee.value||ce.value))),Ve=i((()=>o.showWordLimit&&!!f.value.maxlength&&("text"===o.type||"textarea"===o.type)&&!x.value&&!o.readonly&&!o.showPassword)),Ae=i((()=>Array.from(Ee.value).length)),Me=i((()=>!!Ve.value&&Ae.value>Number(f.value.maxlength))),Ne=i((()=>!!u.suffix||!!o.suffixIcon||Oe.value||o.showPassword||Ve.value||!!ze.value&&ke.value)),[_e,Be]=function(e){const t=d();return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t.value={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t.value)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t.value;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(le);P(de,(e=>{if(!Ve.value||"both"!==o.resize)return;const t=e[0],{width:a}=t.contentRect;xe.value={right:`calc(100% - ${a+15+6}px)`}}));const Re=()=>{const{type:e,autosize:t}=o;if(ae&&"textarea"===e)if(t){const e=oe(t)?t.minRows:void 0,a=oe(t)?t.maxRows:void 0;Se.value=r({},ye(de.value,e,a))}else Se.value={minHeight:ye(de.value).minHeight}},He=()=>{const e=$e.value;e&&e.value!==Ee.value&&(e.value=Ee.value)},Ke=e=>{const{el:t}=l.vnode;if(!t)return;const a=Array.from(t.querySelectorAll(`.${te.e(e)}`)).find((e=>e.parentNode===t));if(!a)return;const o=n[e];u[o]?a.style.transform=`translateX(${"suffix"===e?"-":""}${t.querySelector(`.${te.be("group",o)}`).offsetWidth}px)`:a.removeAttribute("style")},Te=()=>{Ke("prefix"),Ke("suffix")},We=async e=>{_e();let{value:t}=e.target;o.formatter&&(t=o.parser?o.parser(t):t,t=o.formatter(t)),me.value||t!==Ee.value&&(a(se,t),a("input",t),await E(),He(),Be())},qe=e=>{a("change",e.target.value)},Le=e=>{a("compositionstart",e),me.value=!0},Ue=e=>{var t;a("compositionupdate",e);const o=null==(t=e.target)?void 0:t.value,n=o[o.length-1]||"";me.value=!pe(n)},Xe=e=>{a("compositionend",e),me.value&&(me.value=!1,We(e))},De=()=>{be.value=!be.value,Ye()},Ye=async()=>{var e;await E(),null==(e=$e.value)||e.focus()},Ze=e=>{ce.value=!0,a("focus",e)},Je=e=>{var t;ce.value=!1,a("blur",e),o.validateEvent&&(null==(t=null==m?void 0:m.validate)||t.call(m,"blur").catch((e=>O())))},Qe=e=>{ve.value=!1,a("mouseleave",e)},Ge=e=>{ve.value=!0,a("mouseenter",e)},et=e=>{a("keydown",e)},tt=()=>{a(se,""),a("change",""),a("clear"),a("input","")};return j((()=>o.modelValue),(()=>{var e;E((()=>Re())),o.validateEvent&&(null==(e=null==m?void 0:m.validate)||e.call(m,"change").catch((e=>O())))})),j(Ee,(()=>He())),j((()=>o.type),(async()=>{await E(),He(),Re(),Te()})),F((async()=>{!o.formatter&&o.parser,He(),Te(),await E(),Re()})),V((async()=>{await E(),Te()})),t({input:le,textarea:de,ref:$e,textareaStyle:je,autosize:A(o,"autosize"),focus:Ye,blur:()=>{var e;return null==(e=$e.value)?void 0:e.blur()},select:()=>{var e;null==(e=$e.value)||e.select()},clear:tt,resizeTextarea:Re}),(e,t)=>M((_(),B("div",Y(T(c),{class:["textarea"===e.type?T(ne).b():T(te).b(),T(te).m(T(b)),T(te).is("disabled",T(x)),T(te).is("exceed",T(Me)),{[T(te).b("group")]:e.$slots.prepend||e.$slots.append,[T(te).bm("group","append")]:e.$slots.append,[T(te).bm("group","prepend")]:e.$slots.prepend,[T(te).m("prefix")]:e.$slots.prefix||e.prefixIcon,[T(te).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[T(te).bm("suffix","password-clear")]:T(Oe)&&T(Fe)},e.$attrs.class],style:T(Pe),role:e.containerRole,onMouseenter:Ge,onMouseleave:Qe}),[R(" input "),"textarea"!==e.type?(_(),B(H,{key:0},[R(" prepend slot "),e.$slots.prepend?(_(),B("div",{key:0,class:K(T(te).be("group","prepend"))},[W(e.$slots,"prepend")],2)):R("v-if",!0),q("div",{class:K([T(te).e("wrapper"),T(te).is("focus",ce.value)])},[R(" prefix slot "),e.$slots.prefix||e.prefixIcon?(_(),B("span",{key:0,class:K(T(te).e("prefix"))},[q("span",{class:K(T(te).e("prefix-inner"))},[W(e.$slots,"prefix"),e.prefixIcon?(_(),L(T(D),{key:0,class:K(T(te).e("icon"))},{default:U((()=>[(_(),L(X(e.prefixIcon)))])),_:1},8,["class"])):R("v-if",!0)],2)],2)):R("v-if",!0),q("input",Y({id:T(y),ref_key:"input",ref:le,class:T(te).e("inner")},T(f),{type:e.showPassword?be.value?"text":"password":e.type,disabled:T(x),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:Le,onCompositionupdate:Ue,onCompositionend:Xe,onInput:We,onFocus:Ze,onBlur:Je,onChange:qe,onKeydown:et}),null,16,he),R(" suffix slot "),T(Ne)?(_(),B("span",{key:1,class:K(T(te).e("suffix"))},[q("span",{class:K(T(te).e("suffix-inner"))},[T(Oe)&&T(Fe)&&T(Ve)?R("v-if",!0):(_(),B(H,{key:0},[W(e.$slots,"suffix"),e.suffixIcon?(_(),L(T(D),{key:0,class:K(T(te).e("icon"))},{default:U((()=>[(_(),L(X(e.suffixIcon)))])),_:1},8,["class"])):R("v-if",!0)],64)),T(Oe)?(_(),L(T(D),{key:1,class:K([T(te).e("icon"),T(te).e("clear")]),onMousedown:t[0]||(t[0]=Q((()=>{}),["prevent"])),onClick:tt},{default:U((()=>[Z(T(J))])),_:1},8,["class"])):R("v-if",!0),T(Fe)?(_(),L(T(D),{key:2,class:K([T(te).e("icon"),T(te).e("password")]),onClick:De},{default:U((()=>[(_(),L(X(T(Ie))))])),_:1},8,["class"])):R("v-if",!0),T(Ve)?(_(),B("span",{key:3,class:K(T(te).e("count"))},[q("span",{class:K(T(te).e("count-inner"))},G(T(Ae))+" / "+G(T(f).maxlength),3)],2)):R("v-if",!0),T(ze)&&T(Ce)&&T(ke)?(_(),L(T(D),{key:4,class:K([T(te).e("icon"),T(te).e("validateIcon"),T(te).is("loading","validating"===T(ze))])},{default:U((()=>[(_(),L(X(T(Ce))))])),_:1},8,["class"])):R("v-if",!0)],2)],2)):R("v-if",!0)],2),R(" append slot "),e.$slots.append?(_(),B("div",{key:1,class:K(T(te).be("group","append"))},[W(e.$slots,"append")],2)):R("v-if",!0)],64)):(_(),B(H,{key:1},[R(" textarea "),q("textarea",Y({id:T(y),ref_key:"textarea",ref:de,class:T(ne).e("inner")},T(f),{tabindex:e.tabindex,disabled:T(x),readonly:e.readonly,autocomplete:e.autocomplete,style:T(je),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:Le,onCompositionupdate:Ue,onCompositionend:Xe,onInput:We,onFocus:Ze,onBlur:Je,onChange:qe,onKeydown:et}),null,16,we),T(Ve)?(_(),B("span",{key:0,style:ee(xe.value),class:K(T(te).e("count"))},G(T(Ae))+" / "+G(T(f).maxlength),7)):R("v-if",!0)],64))],16,ge)),[[N,"hidden"!==e.type]])}})))),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{$e as E,pe as i,fe as u};
